[tox]
distshare = {homedir}/.tox/distshare
envlist = py{34,35,36,37}-django{18,110,111,20,21,22}
skip_missing_interpreters = true
indexserver =
    pypi = https://pypi.python.org/simple

[testenv]
passenv = TRAVIS TRAVIS_*
setenv = PYTHONPATH = {toxinidir}
commands =
    py.test --pep8 -m pep8
    coverage run manage.py test
    coverage report -m
deps =
    coverage
    py
    pytest
    pytest-pep8
    pytest-cov
    pyyaml
    django18: Django>=1.8,<1.9
    django18: djangorestframework<3.7
    django110: Django>=1.10,<1.11
    django111: Django>=1.11,<2
    django20: Django>=2.0,<2.1
    django21: Django>=2.1,<2.2
    django22: Django>=2.2,<2.3

[pytest]
addopts = -vvl
exclude = tests/* manage
pep8maxlinelength = 100
pep8ignore =
    tests/* ALL
    django_http_method/* W293
    * W503
